"""Pydantic schemas for {{ENTITY_NAME}} MCP tools.

Auto-generated by fastapi-to-mcp Claude Code skill
Generated: {{GENERATION_DATE}}

These schemas define the data structures used by MCP tools to communicate
with the FastAPI backend. They provide validation, type safety, and
documentation for AI agents.
"""

from enum import Enum
from typing import Optional, List
from datetime import datetime

from pydantic import BaseModel, Field


# Error type taxonomy for AI-friendly error handling
ERROR_TYPES = {
    "authentication_error": "authentication_error",
    "authorization_error": "authorization_error",
    "not_found_error": "not_found_error",
    "validation_error": "validation_error",
    "backend_error": "backend_error",
    "timeout_error": "timeout_error",
    "connection_error": "connection_error",
}


{{ENUM_DEFINITIONS}}


class {{RESPONSE_MODEL}}(BaseModel):
    """{{ENTITY_NAME}} response model from backend.

    This represents the complete {{ENTITY_NAME}} object as returned by the
    FastAPI backend.
    """

{{RESPONSE_FIELDS}}


{{PARAMETER_MODELS}}


class ValidationErrorDetail(BaseModel):
    """Detailed validation error for a specific field."""

    field: str = Field(..., description="Field name that failed validation")
    message: str = Field(..., description="Error message describing the issue")
    received_value: Optional[str] = Field(None, description="Value that was received")
    suggestion: Optional[str] = Field(None, description="Suggestion for fixing the error")


class ErrorResponse(BaseModel):
    """Standardized error response for AI agents.

    This format provides clear, actionable error information that AI agents
    can understand and explain to users in natural language.
    """

    error_type: str = Field(
        ...,
        description="Type of error from ERROR_TYPES taxonomy",
        examples=list(ERROR_TYPES.values()),
    )
    message: str = Field(
        ...,
        description="Human-readable error message for AI agent",
    )
    details: Optional[dict] = Field(
        None,
        description="Additional structured error details (status codes, field errors, etc.)",
    )
    suggestions: List[str] = Field(
        default_factory=list,
        description="Actionable suggestions for resolving the error",
    )

    class Config:
        """Pydantic model configuration."""
        json_schema_extra = {
            "examples": [
                {
                    "error_type": "validation_error",
                    "message": "Title must be between 1 and 200 characters",
                    "details": {
                        "field": "title",
                        "received_value": "",
                        "constraint": "min_length=1"
                    },
                    "suggestions": [
                        "Provide a non-empty title",
                        "Title should describe the {{ENTITY_NAME}}"
                    ]
                },
                {
                    "error_type": "not_found_error",
                    "message": "{{ENTITY_NAME}} not found with ID: 123",
                    "details": {
                        "{{ENTITY_ID_FIELD}}": 123,
                        "status_code": 404
                    },
                    "suggestions": [
                        "Verify the {{ENTITY_NAME}} ID is correct",
                        "Use list_{{ENTITY_NAME_PLURAL}} to see available {{ENTITY_NAME_PLURAL}}"
                    ]
                }
            ]
        }
