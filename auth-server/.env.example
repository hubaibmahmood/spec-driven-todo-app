# =============================================================================
# Auth Server Environment Variables
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Database Configuration (Neon PostgreSQL)
# -----------------------------------------------------------------------------
# Connection string for PostgreSQL database
# Format: postgresql://user:password@host:port/database?sslmode=require
# Get this from: https://console.neon.tech (for Neon)
#
# For Docker Compose (use Docker service name 'db' as hostname):
# DATABASE_URL="postgresql://postgres:postgres@db:5432/momentum"
#
# For Neon (production):
# DATABASE_URL="postgresql://username:password@ep-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require"
DATABASE_URL="postgresql://username:password@ep-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require"

# -----------------------------------------------------------------------------
# Application Settings
# -----------------------------------------------------------------------------
# Environment: "development" | "production" | "test"
# - development: Verbose logging, email verification links in console
# - production: Minimal logging, secure cookies, HTTPS required
NODE_ENV="development"

# Server port (default: 3002 for auth server)
PORT=3002

# -----------------------------------------------------------------------------
# Authentication & Security
# -----------------------------------------------------------------------------
# Better-auth secret key (32+ characters recommended)
# Generate with: openssl rand -base64 32
# Or: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# CRITICAL: Keep this secret! Used for signing JWT tokens and sessions
BETTER_AUTH_SECRET="generate-a-secure-random-string-min-32-chars-long"

# Better-auth public URL (used for callback URLs)
# Docker Compose: http://localhost:3002
# Production: https://auth.yourdomain.com
BETTER_AUTH_URL="http://localhost:3002"

# -----------------------------------------------------------------------------
# CORS (Cross-Origin Resource Sharing)
# -----------------------------------------------------------------------------
# Comma-separated list of allowed origins (no spaces after commas)
# Development: Include localhost URLs for frontend and API
# Production: Include your production domain(s)
CORS_ORIGINS="http://localhost:3000,http://localhost:5173,http://localhost:8000"

# -----------------------------------------------------------------------------
# Email Service (Resend)
# -----------------------------------------------------------------------------
# Resend API key for sending verification and password reset emails
# Get your API key from: https://resend.com/api-keys
# Free tier: 3,000 emails/month
RESEND_API_KEY="re_your_resend_api_key_here"

# Email sender address (must be verified in Resend dashboard)
# For custom domains: verify domain in Resend first
# For testing: use Resend's test domain (resend.dev)
EMAIL_FROM="noreply@yourdomain.com"

# -----------------------------------------------------------------------------
# Frontend Configuration
# -----------------------------------------------------------------------------
# Primary frontend URL (used for email links and redirects)
# Development: http://localhost:3000 or http://localhost:5173
# Production: https://yourdomain.com
FRONTEND_URL="http://localhost:3000"

# -----------------------------------------------------------------------------
# OAuth Providers (Optional - Phase 9)
# -----------------------------------------------------------------------------
# Google OAuth credentials (optional, for Google sign-in)
# Get from: https://console.cloud.google.com/apis/credentials
# Create OAuth 2.0 Client ID, add authorized redirect URIs
# GOOGLE_CLIENT_ID="your-client-id.apps.googleusercontent.com"
# GOOGLE_CLIENT_SECRET="your-client-secret"
# GOOGLE_REDIRECT_URI="http://localhost:8080/api/auth/callback/google"

# -----------------------------------------------------------------------------
# JWT Configuration (Hybrid Auth with FastAPI Backend)
# -----------------------------------------------------------------------------
# JWT secret for signing tokens (separate from BETTER_AUTH_SECRET)
# Generate with: openssl rand -base64 32
JWT_SECRET="generate-a-different-jwt-secret-key"

# JWT token expiration (default: 7 days)
# Format: "7d", "24h", "60m", "3600s"
JWT_EXPIRES_IN="7d"

# -----------------------------------------------------------------------------
# Additional Notes
# -----------------------------------------------------------------------------
# 1. DATABASE_URL formats:
#    Docker Compose: postgresql://postgres:postgres@db:5432/momentum
#    Neon (production): postgresql://user:pass@ep-xxx.region.aws.neon.tech/dbname?sslmode=require
#
# 2. Docker Quick Start:
#    - Copy this file: cp .env.example .env
#    - Edit .env with your values (RESEND_API_KEY, secrets)
#    - Run: docker-compose up --build
#    - Access: http://localhost:4000/health
#
# 3. For production deployment:
#    - Set NODE_ENV="production"
#    - Use HTTPS URLs for FRONTEND_URL, BETTER_AUTH_URL, and CORS_ORIGINS
#    - Ensure BETTER_AUTH_SECRET and JWT_SECRET are strong (32+ chars)
#    - Use production DATABASE_URL (Neon or managed PostgreSQL)
#    - Verify EMAIL_FROM domain in Resend
#
# 4. Testing email locally:
#    - In development, verification links print to console
#    - Set RESEND_API_KEY to enable actual email sending
#
# 5. CORS_ORIGINS format:
#    - No spaces: "https://app.com,https://www.app.com"
#    - Include all domains that will call your auth server
#
# 6. Generate secure secrets:
#    openssl rand -base64 32
#    OR: node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
